{"version":3,"sources":["components/Header.js","images/filler.jpg","components/Image.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ConfirmPopup.js","components/ImagePopup.js","utils/utils.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/api.js","components/RenderLoading.js","components/ProtectedRoute.js","utils/auth.js","components/Login.js","components/Register.js","components/BurgerMenu.js","images/successful-registration.svg","images/registration-error.svg","components/InfoTooltip.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","email","onSignOut","onMenuClick","location","useLocation","history","useHistory","useState","isClick","setIsClick","useEffect","className","pathname","to","onClick","localStorage","removeItem","push","Image","src","alt","isLoadError","setIsLoadError","filler","onError","CurrentUserContext","React","createContext","Card","getCard","card","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","likeOnCard","cardLikeButtonClassName","cardDeleteButtonClassName","type","link","name","length","Main","onEditProfile","onAddPlace","onEditAvatar","onCardClick","cards","target","href","avatar","about","map","Footer","currentDate","Date","getFullYear","PopupWithForm","title","submitButtonText","isOpen","onClose","onSubmit","children","isValidity","isSubmitting","isDisabled","isDisabledDefault","noValidate","disabled","ConfirmPopup","onDeleteCard","isLoading","evt","preventDefault","ImagePopup","validateField","validator","fieldName","Object","keys","errorKey","errorResult","reduce","acc","item","validators","userName","required","value","minLength","maxLength","description","EditProfilePopup","onUpdateUser","setIsDisabledDefault","formValues","setFormValues","errors","setErrors","undefined","handleInputChange","useCallback","state","userNameValidationRusult","descriptionValidationRusult","isUserNameInvalid","values","Boolean","isDescriptionInvalid","isSubmitDisabled","isAnyParamsUserNameValid","isAnyParamsDescriptionValid","id","onChange","EditAvatarPopup","onUpdateAvatar","avatarValue","useRef","current","placeholder","ref","cardName","cardLink","url","test","AddPlacePopup","cardNameValidationResult","cardLinkValidationResult","isСardNameInvalid","isСardLinkInvalid","isAnyParamsCardNameValid","isAnyParamsCardLinkValid","api","options","this","_baseUrl","baseUrl","_headers","headers","fetch","method","then","res","ok","json","Promise","reject","status","all","getCards","getUserInfo","body","JSON","stringify","cardId","hasLike","avatarUrl","authorization","RenderLoading","ProtectedRoute","Component","component","props","loggedIn","BASE_URL","password","Login","handleLogin","isSubmittingLogin","setIsSubmittingLogin","passwordValidationResult","emailValidationResult","isPasswordInvalid","isEmailInvalid","isAnyParamsPasswordValid","isAnyParamsEmailValid","response","data","setItem","token","catch","err","console","log","auth","finally","Register","onShowPopup","onRegistrationResolve","isSubmittingRegister","setIsSubmittingRegister","error","BurgerMenu","InfoTooltip","isSuccessfulRegistration","successfulRegistration","registrationError","App","setIsSuccessfulRegistration","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isConfirmPopupOpen","setIsConfirmPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","dataLoading","setDataLoading","isLoadingProfileInfo","setIsLoadingProfileInfo","isLoadingCardAdd","setIsLoadingCardAdd","isLoadingProfileAvatar","setIsLoadingProfileAvatar","isLoadingConfirm","setIsLoadingConfirm","currentDeletionCard","setCurrentDeletionCard","isSubmittingProfileInfo","setIsSubmittingProfileInfo","isSubmittingCardAdd","setIsSubmittingCardAdd","isSubmittingDeleteConfirm","setIsSubmittingDeleteConfirm","isSubmittingProfileAvatar","setIsSubmittingProfileAvatar","setLoggedIn","isMenuClick","setIsMenuClick","closeAllPopups","handleTokenCheck","getInitialData","userInfo","getItem","Authorization","prevState","Provider","path","toggleCardLike","newCard","prevCards","prevCard","userObj","setUserInfo","createCard","deleteCard","oldCards","filter","oldCard","avatarObj","updateAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5b6aef19.chunk.js","sourcesContent":["import { Link, useLocation, useHistory } from 'react-router-dom';\r\nimport { useState, useEffect } from 'react';\r\n\r\nfunction Header({ email, onSignOut, onMenuClick }) {\r\n  let location = useLocation();\r\n  let history = useHistory();\r\n\r\n  const [isClick, setIsClick] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsClick(false);\r\n  }, [location]);\r\n\r\n  const handleOutClick = () => {\r\n    onSignOut();\r\n    localStorage.removeItem('token');\r\n    history.push('/sign-in');\r\n  };\r\n\r\n  const onClick = () => {\r\n    setIsClick(!isClick);\r\n    onMenuClick();\r\n  };\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <figure className=\"header__logo\" />\r\n      {location.pathname === '/sign-in' ? (\r\n        <Link to=\"/sign-up\" className=\"header__element\">\r\n          Регистрация\r\n        </Link>\r\n      ) : location.pathname === '/sign-up' ? (\r\n        <Link to=\"/sign-in\" className=\"header__element\">\r\n          Войти\r\n        </Link>\r\n      ) : (\r\n        <>\r\n          <nav className=\"header__menu\">\r\n            <p className=\"header__menu-element\">{email}</p>\r\n            <button\r\n              onClick={handleOutClick}\r\n              className=\"header__menu-element header__menu-element_button\"\r\n            >\r\n              Выйти\r\n            </button>\r\n          </nav>\r\n          <nav className=\"burger\">\r\n            <figure\r\n              onClick={onClick}\r\n              className={`burger__button burger__button_type_cross ${\r\n                isClick && 'burger__button_active'\r\n              }`}\r\n            >\r\n              <span className=\"burger__contain\" />\r\n            </figure>\r\n          </nav>\r\n        </>\r\n      )}\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","export default __webpack_public_path__ + \"static/media/filler.6c929a1e.jpg\";","import { useState, useEffect } from 'react';\r\nimport filler from '../images/filler.jpg';\r\n\r\nfunction Image({ src, alt, onClick, className }) {\r\n  const [isLoadError, setIsLoadError] = useState(false);\r\n\r\n  useEffect(() => setIsLoadError(false), [src]);\r\n\r\n  function handleLoadError() {\r\n    setIsLoadError(true);\r\n  }\r\n\r\n  return (\r\n    <img\r\n      onClick={onClick}\r\n      src={isLoadError ? filler : src}\r\n      alt={`Фото: ${alt ? alt : ''}`}\r\n      className={className}\r\n      onError={handleLoadError}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Image;\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import { useContext } from 'react';\r\nimport Image from './Image';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({ getCard, card, onCardLike, onCardDelete }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  // Определяем, являемся ли мы владельцем текущей карточки\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const isLiked = card.likes.some(\r\n    (likeOnCard) => likeOnCard._id === currentUser._id\r\n  );\r\n\r\n  const cardLikeButtonClassName = `element__like\r\n    ${isLiked && 'element__like_active'}`;\r\n  const cardDeleteButtonClassName = `element__trash-button\r\n    ${isOwn && 'element__trash-button_visible'}`;\r\n\r\n  function handleClickImage() {\r\n    getCard(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  return (\r\n    <li className=\"element\">\r\n      <button\r\n        onClick={handleDeleteClick}\r\n        type=\"button\"\r\n        className={cardDeleteButtonClassName}\r\n      />\r\n      <Image\r\n        src={card.link}\r\n        alt={card.name}\r\n        className=\"element__image\"\r\n        onClick={handleClickImage}\r\n      />\r\n      <div className=\"element__container\">\r\n        <h2 className=\"element__title\"> {card.name} </h2>\r\n        <div className=\"element__like-group\">\r\n          <button\r\n            onClick={handleLikeClick}\r\n            type=\"button\"\r\n            className={cardLikeButtonClassName}\r\n          />\r\n          <h3 className=\"element__like-counter\"> {card.likes.length} </h3>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import { useContext } from 'react';\r\nimport Card from './Card';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main({\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onEditAvatar,\r\n  onCardClick,\r\n  cards,\r\n  onCardLike,\r\n  onCardDelete,\r\n}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"main\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__container\">\r\n          <a\r\n            onClick={onEditAvatar}\r\n            target=\"_self\"\r\n            href=\"#\"\r\n            className=\"profile__cover\"\r\n          >\r\n            <img\r\n              alt={`Аватар пользователя ${currentUser.name}`}\r\n              src={currentUser.avatar}\r\n              className=\"profile__avatar\"\r\n            />\r\n          </a>\r\n          <div className=\"profile__info\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button\r\n              onClick={onEditProfile}\r\n              type=\"button\"\r\n              className=\"profile__button-edit\"\r\n            />\r\n            <p className=\"profile__status\">{currentUser.about}</p>\r\n          </div>\r\n        </div>\r\n        <button\r\n          onClick={onAddPlace}\r\n          type=\"button\"\r\n          className=\"profile__button-add\"\r\n        />\r\n      </section>\r\n      <section>\r\n        <ul className=\"elements\">\r\n          {cards.map((card) => (\r\n            <Card\r\n              onCardDelete={onCardDelete}\r\n              onCardLike={onCardLike}\r\n              getCard={onCardClick}\r\n              card={card}\r\n              key={card._id}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","function Footer() {\r\n  const currentDate = new Date();\r\n\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">\r\n        &copy; {currentDate.getFullYear()}. Mesto-React, Russia\r\n      </p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","function PopupWithForm({\r\n  name,\r\n  title,\r\n  submitButtonText,\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  children,\r\n  isValidity,\r\n  isSubmitting,\r\n  isDisabledDefault,\r\n}) {\r\n  const isDisabled = isDisabledDefault || isValidity || isSubmitting;\r\n  return (\r\n    <section className={`popup ${isOpen && 'popup_opened'}`}>\r\n      <div className=\"popup__container\">\r\n        <button\r\n          onClick={onClose}\r\n          type=\"button\"\r\n          className=\"popup__button-close\"\r\n        />\r\n        <h2 className=\"popup__title\">{title}</h2>\r\n        <form\r\n          onSubmit={onSubmit}\r\n          noValidate\r\n          name={`form-${name}`}\r\n          className=\"form\"\r\n        >\r\n          {children}\r\n          <button\r\n            disabled={isDisabled}\r\n            type=\"submit\"\r\n            className={`form__button ${isDisabled && 'form__button_disabled'}`}\r\n          >\r\n            {submitButtonText}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import PopupWithForm from './PopupWithForm';\r\n\r\nfunction ConfirmPopup({\r\n  isOpen,\r\n  onClose,\r\n  onDeleteCard,\r\n  card,\r\n  isLoading,\r\n  isSubmitting,\r\n}) {\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onDeleteCard(card);\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"delete-confirm\"\r\n      title=\"Вы уверены?\"\r\n      submitButtonText={isLoading ? 'Удаление...' : 'Да'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isSubmitting={isSubmitting}\r\n    />\r\n  );\r\n}\r\n\r\nexport default ConfirmPopup;\r\n","import Image from './Image';\r\n\r\nfunction ImagePopup({ card, onClose }) {\r\n  return (\r\n    <section className={`popup ${card && 'popup_opened'}`}>\r\n      <div className=\"popup__zoom-image\">\r\n        <button\r\n          onClick={onClose}\r\n          type=\"button\"\r\n          className=\"popup__button-close\"\r\n        />\r\n        <Image\r\n          src={card && card.link}\r\n          alt={card && card.name}\r\n          className=\"popup__image\"\r\n        />\r\n        <h2 className=\"popup__title-zoom-image\"> {card && card.name} </h2>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","export const validateField = (validator, fieldName) => {\r\n  return Object.keys(validator)\r\n    .map((errorKey) => {\r\n      const errorResult = validator[errorKey](fieldName);\r\n      return { [errorKey]: errorResult };\r\n    })\r\n    .reduce((acc, item) => ({ ...acc, ...item }), {});\r\n};\r\n","import { useState, useContext, useEffect, useCallback } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { validateField } from '../utils/utils';\r\n\r\nconst minUserNameInputLength = 2;\r\nconst maxUserNameInputLength = 40;\r\nconst minDescriptionInputLength = 2;\r\nconst maxDescriptionInputLength = 200;\r\n\r\nconst validators = {\r\n  userName: {\r\n    required: (value) => value === '',\r\n    minLength: (value) => value.length < minUserNameInputLength,\r\n    maxLength: (value) => value.length > maxUserNameInputLength,\r\n  },\r\n  description: {\r\n    required: (value) => value === '',\r\n    minLength: (value) => value.length < minDescriptionInputLength,\r\n    maxLength: (value) => value.length > maxDescriptionInputLength,\r\n  },\r\n};\r\n\r\nfunction EditProfilePopup({\r\n  isOpen,\r\n  onClose,\r\n  onUpdateUser,\r\n  isLoading,\r\n  isSubmitting,\r\n}) {\r\n  const [isDisabledDefault, setIsDisabledDefault] = useState(true);\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const [formValues, setFormValues] = useState({\r\n    userName: '',\r\n    description: '',\r\n  });\r\n\r\n  const [errors, setErrors] = useState({\r\n    userName: {\r\n      required: true,\r\n      minLength: true,\r\n      maxLength: true,\r\n    },\r\n    description: {\r\n      required: true,\r\n      minLength: true,\r\n      maxLength: true,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (currentUser.name !== undefined && currentUser.about !== undefined) {\r\n      setFormValues({\r\n        userName: currentUser.name,\r\n        description: currentUser.about,\r\n      });\r\n    }\r\n    setIsDisabledDefault(true);\r\n  }, [isOpen, currentUser]);\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onUpdateUser({\r\n      name: userName,\r\n      about: description,\r\n    });\r\n  };\r\n\r\n  const handleInputChange = useCallback(\r\n    (evt) => {\r\n      setIsDisabledDefault(false);\r\n      const { name, value } = evt.target;\r\n      setFormValues((state) => ({ ...state, [name]: value }));\r\n    },\r\n    [setFormValues]\r\n  );\r\n\r\n  useEffect(\r\n    function validateInputs() {\r\n      const { userName, description } = formValues;\r\n\r\n      const userNameValidationRusult = validateField(\r\n        validators.userName,\r\n        userName\r\n      );\r\n\r\n      const descriptionValidationRusult = validateField(\r\n        validators.description,\r\n        description\r\n      );\r\n\r\n      setErrors({\r\n        userName: userNameValidationRusult,\r\n        description: descriptionValidationRusult,\r\n      });\r\n    },\r\n    [formValues, setErrors]\r\n  );\r\n\r\n  const { userName, description } = formValues;\r\n  const isUserNameInvalid = Object.values(errors.userName).some(Boolean);\r\n  const isDescriptionInvalid = Object.values(errors.description).some(Boolean);\r\n  const isSubmitDisabled = isUserNameInvalid || isDescriptionInvalid;\r\n\r\n  const isAnyParamsUserNameValid =\r\n    errors.userName.required || errors.userName.minLength;\r\n  const isAnyParamsDescriptionValid =\r\n    errors.description.required || errors.description.minLength;\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile-edit\"\r\n      title=\"Редактировать профиль\"\r\n      submitButtonText={isLoading ? 'Сохранение...' : 'Сохранить'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isValidity={isSubmitDisabled}\r\n      isSubmitting={isSubmitting}\r\n      isDisabledDefault={isDisabledDefault}\r\n    >\r\n      <fieldset className=\"form__fields\">\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"text\"\r\n            className={`form__input ${\r\n              isUserNameInvalid && 'form__input_type_error'\r\n            }`}\r\n            name=\"userName\"\r\n            required\r\n            minLength={minUserNameInputLength}\r\n            maxLength={maxUserNameInputLength}\r\n            id=\"profile-name-input\"\r\n            value={userName}\r\n            onChange={handleInputChange}\r\n          />\r\n          <span\r\n            className={`form__error ${\r\n              isUserNameInvalid && 'form__error_visible'\r\n            }`}\r\n          >\r\n            {isAnyParamsUserNameValid\r\n              ? errors.userName.required\r\n                ? 'Поле обязательно для заполнения'\r\n                : `Введите фразу не короче ${minUserNameInputLength} символов`\r\n              : ''}\r\n            {errors.userName.maxLength &&\r\n              `Превышел лимит в ${maxUserNameInputLength} символов`}\r\n          </span>\r\n        </label>\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"text\"\r\n            className={`form__input ${\r\n              isDescriptionInvalid && 'form__input_type_error'\r\n            }`}\r\n            name=\"description\"\r\n            required\r\n            minLength={minDescriptionInputLength}\r\n            maxLength={maxDescriptionInputLength}\r\n            id=\"profile-status-input\"\r\n            value={description}\r\n            onChange={handleInputChange}\r\n          />\r\n          <span\r\n            className={`form__error ${\r\n              isDescriptionInvalid && 'form__error_visible'\r\n            }`}\r\n          >\r\n            {isAnyParamsDescriptionValid\r\n              ? errors.description.required\r\n                ? 'Поле обязательно для заполнения'\r\n                : `Введите фразу не короче ${minDescriptionInputLength} символов`\r\n              : ''}\r\n            {errors.description.maxLength &&\r\n              `Превышел лимит в ${maxDescriptionInputLength} символов`}\r\n          </span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import { useRef, useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({\r\n  isOpen,\r\n  onClose,\r\n  onUpdateAvatar,\r\n  isLoading,\r\n  isSubmitting,\r\n}) {\r\n  const avatarValue = useRef();\r\n\r\n  useEffect(() => {\r\n    avatarValue.current.value = '';\r\n  }, [isOpen]);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    onUpdateAvatar({\r\n      avatar: avatarValue.current.value,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"update-avatar\"\r\n      title=\"Обновить аватар\"\r\n      submitButtonText={isLoading ? 'Сохранение...' : 'Сохранить'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isSubmitting={isSubmitting}\r\n    >\r\n      <fieldset className=\"form__fields\">\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"url\"\r\n            placeholder=\"Ссылка на фотографию\"\r\n            className=\"form__input form__input_field_avatar-link\"\r\n            name=\"avatarLink\"\r\n            required\r\n            id=\"avatar-link-input\"\r\n            ref={avatarValue}\r\n          />\r\n          <span className=\"form__error avatar-link-input-error\" />\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { validateField } from '../utils/utils';\r\n\r\nconst minInputLength = 2;\r\nconst maxInputLength = 30;\r\n\r\nconst validators = {\r\n  cardName: {\r\n    required: (value) => value === '',\r\n    minLength: (value) => value.length < minInputLength,\r\n    maxLength: (value) => value.length > maxInputLength,\r\n  },\r\n  cardLink: {\r\n    required: (value) => value === '',\r\n    url: (value) => !/^(ftp|http|https):\\/\\/[^ \"]+$/.test(value),\r\n  },\r\n};\r\n\r\nfunction AddPlacePopup({\r\n  isOpen,\r\n  onClose,\r\n  onAddPlace,\r\n  isLoading,\r\n  isSubmitting,\r\n}) {\r\n  const [isDisabledDefault, setIsDisabledDefault] = useState(true);\r\n\r\n  const [formValues, setFormValues] = useState({\r\n    cardName: '',\r\n    cardLink: '',\r\n  });\r\n\r\n  const [errors, setErrors] = useState({\r\n    cardName: {\r\n      required: true,\r\n      minLength: true,\r\n      maxLength: true,\r\n    },\r\n    cardLink: {\r\n      required: true,\r\n      url: true,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    setFormValues({\r\n      cardName: '',\r\n      cardLink: '',\r\n    });\r\n    setIsDisabledDefault(true);\r\n  }, [isOpen]);\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onAddPlace({\r\n      name: cardName,\r\n      link: cardLink,\r\n    });\r\n  };\r\n\r\n  const handleInputChange = useCallback(\r\n    (evt) => {\r\n      setIsDisabledDefault(false);\r\n      const { name, value } = evt.target;\r\n      setFormValues((state) => ({ ...state, [name]: value }));\r\n    },\r\n    [setFormValues]\r\n  );\r\n\r\n  useEffect(\r\n    function validateInputs() {\r\n      const { cardName, cardLink } = formValues;\r\n      const cardNameValidationResult = validateField(\r\n        validators.cardName,\r\n        cardName\r\n      );\r\n      const cardLinkValidationResult = validateField(\r\n        validators.cardLink,\r\n        cardLink\r\n      );\r\n      setErrors({\r\n        cardName: cardNameValidationResult,\r\n        cardLink: cardLinkValidationResult,\r\n      });\r\n    },\r\n    [formValues, setErrors]\r\n  );\r\n\r\n  const { cardName, cardLink } = formValues;\r\n  const isСardNameInvalid = Object.values(errors.cardName).some(Boolean);\r\n  const isСardLinkInvalid = Object.values(errors.cardLink).some(Boolean);\r\n  const isSubmitDisabled = isСardNameInvalid || isСardLinkInvalid;\r\n\r\n  const isAnyParamsCardNameValid =\r\n    errors.cardName.required || errors.cardName.minLength;\r\n  const isAnyParamsCardLinkValid =\r\n    errors.cardLink.required || errors.cardLink.url;\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"card-add\"\r\n      title=\"Новое место\"\r\n      submitButtonText={isLoading ? 'Добавление...' : 'Добавить'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isValidity={isSubmitDisabled}\r\n      isSubmitting={isSubmitting}\r\n      isDisabledDefault={isDisabledDefault}\r\n    >\r\n      <fieldset className=\"form__fields\">\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Название\"\r\n            className={`form__input ${\r\n              isDisabledDefault\r\n                ? ''\r\n                : isСardNameInvalid && 'form__input_type_error'\r\n            }`}\r\n            name=\"cardName\"\r\n            required\r\n            minLength={minInputLength}\r\n            maxLength={maxInputLength}\r\n            id=\"card-name-input\"\r\n            value={cardName}\r\n            onChange={handleInputChange}\r\n          />\r\n          <span\r\n            className={`form__error ${\r\n              isDisabledDefault\r\n                ? ''\r\n                : isСardNameInvalid && 'form__error_visible'\r\n            }`}\r\n          >\r\n            {isAnyParamsCardNameValid\r\n              ? errors.cardName.required\r\n                ? 'Поле обязательно для заполнения'\r\n                : `Введите фразу не короче ${minInputLength} символов`\r\n              : ''}\r\n            {errors.cardName.maxLength &&\r\n              `Превышел лимит в ${maxInputLength} символов`}\r\n          </span>\r\n        </label>\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"url\"\r\n            placeholder=\"Ссылка на картинку\"\r\n            className={`form__input ${\r\n              isDisabledDefault\r\n                ? ''\r\n                : isСardLinkInvalid && 'form__input_type_error'\r\n            }`}\r\n            name=\"cardLink\"\r\n            required\r\n            id=\"card-link-input\"\r\n            value={cardLink}\r\n            onChange={handleInputChange}\r\n          />\r\n          <span\r\n            className={`form__error ${\r\n              isDisabledDefault\r\n                ? ''\r\n                : isСardLinkInvalid && 'form__error_visible'\r\n            }`}\r\n          >\r\n            {isAnyParamsCardLinkValid\r\n              ? errors.cardLink.required\r\n                ? 'Поле обязательно для заполнения'\r\n                : 'Введите URL'\r\n              : ''}\r\n          </span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","class Api {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  // получаем информацию о карточках\r\n  getCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'GET',\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // получаем информацию о пользователе\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  getInitialData() {\r\n    return Promise.all([this.getCards(), this.getUserInfo()]);\r\n  }\r\n\r\n  // отправляем информацию о пользователе\r\n  setUserInfo(name, status) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: status,\r\n      }),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // создаем карточку\r\n  createCard(name, link) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link,\r\n      }),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // удаляем карточку\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // ставим/убираем лайк\r\n  toggleCardLike(cardId, hasLike) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: hasLike ? 'DELETE' : 'PUT',\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // обновляем аватар\r\n  updateAvatar(avatarUrl) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: avatarUrl,\r\n      }),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n}\r\n\r\n// создаем класс для связи с сервером\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-21',\r\n  headers: {\r\n    // уникальный токен пользователя\r\n    authorization: 'a3ab0050-d01a-4f5a-9bb4-4a039b0aa641',\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\nexport default api;\r\n","function RenderLoading() {\r\n  return (\r\n    <div className=\"loader-ring\">\r\n      <div className=\"loader-ring__main\">\r\n        <div className=\"loader-ring__child\" />\r\n        <div className=\"loader-ring__child\" />\r\n        <div className=\"loader-ring__child\" />\r\n        <div className=\"loader-ring__child\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RenderLoading;\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {() =>\r\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute; ","export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nexport const register = (password, email) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ password, email }),\r\n  })\r\n    .then((response) => {\r\n      return response.json();\r\n    })\r\n    .then((res) => {\r\n      return res;\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const authorize = (password, email) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ password, email }),\r\n  })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      if (data) {\r\n        localStorage.setItem('token', data.token);\r\n        return data;\r\n      }\r\n    })\r\n    .catch((err) => console.log(err));\r\n};\r\n\r\nexport const checkToken = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => data);\r\n};\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { validateField } from '../utils/utils';\r\nimport * as auth from '../utils/auth';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst minInputLength = 2;\r\n\r\nconst validators = {\r\n  password: {\r\n    required: (value) => value === '',\r\n    minLength: (value) => value.length < minInputLength,\r\n  },\r\n  email: {\r\n    required: (value) => value === '',\r\n    email: (value) =>\r\n      !/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(\r\n        value\r\n      ),\r\n  },\r\n};\r\n\r\nfunction Login({ handleLogin }) {\r\n  let history = useHistory();\r\n\r\n  const [isDisabledDefault, setIsDisabledDefault] = useState(true);\r\n  const [isSubmittingLogin, setIsSubmittingLogin] = useState(false);\r\n\r\n  const [formValues, setFormValues] = useState({\r\n    password: '',\r\n    email: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsDisabledDefault(true);\r\n    return () => {\r\n      setFormValues({\r\n        password: '',\r\n        email: '',\r\n      });\r\n    };\r\n  }, []);\r\n\r\n  const [errors, setErrors] = useState({\r\n    password: {\r\n      required: true,\r\n      minLength: true,\r\n    },\r\n    email: {\r\n      required: true,\r\n      email: true,\r\n    },\r\n  });\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    setIsSubmittingLogin(true);\r\n    auth\r\n      .authorize(formValues.password, formValues.email)\r\n      .then((data) => {\r\n        if (data.token) {\r\n          localStorage.setItem('token', data.token);\r\n          handleLogin();\r\n          history.push('/main');\r\n        }\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        setIsDisabledDefault(true);\r\n        setIsSubmittingLogin(false);\r\n      });\r\n  };\r\n\r\n  const handleInputChange = useCallback(\r\n    (evt) => {\r\n      setIsDisabledDefault(false);\r\n      const { name, value } = evt.target;\r\n      setFormValues((state) => ({ ...state, [name]: value }));\r\n    },\r\n    [setFormValues]\r\n  );\r\n\r\n  useEffect(\r\n    function validateInputs() {\r\n      const { password, email } = formValues;\r\n      const passwordValidationResult = validateField(\r\n        validators.password,\r\n        password\r\n      );\r\n      const emailValidationResult = validateField(validators.email, email);\r\n      setErrors({\r\n        password: passwordValidationResult,\r\n        email: emailValidationResult,\r\n      });\r\n    },\r\n    [formValues, setErrors]\r\n  );\r\n\r\n  const { password, email } = formValues;\r\n  const isPasswordInvalid = Object.values(errors.password).some(Boolean);\r\n  const isEmailInvalid = Object.values(errors.email).some(Boolean);\r\n  const isSubmitDisabled = isPasswordInvalid || isEmailInvalid;\r\n\r\n  const isAnyParamsPasswordValid =\r\n    errors.password.required || errors.password.minLength;\r\n  const isAnyParamsEmailValid = errors.email.required || errors.email.email;\r\n\r\n  const isDisabled = isDisabledDefault || isSubmitDisabled || isSubmittingLogin;\r\n\r\n  return (\r\n    <section className=\"login\">\r\n      <div className=\"login__container\">\r\n        <h2 className=\"login__title\">Вход</h2>\r\n        <form onSubmit={handleSubmit} noValidate name=\"login\" className=\"form\">\r\n          <fieldset className=\"form__fields\">\r\n            <label className=\"label\">\r\n              <input\r\n                type=\"email\"\r\n                placeholder=\"Email\"\r\n                className={`form__input form__input_location_sign ${\r\n                  isDisabledDefault\r\n                    ? ''\r\n                    : isEmailInvalid && 'form__input_type_error'\r\n                }`}\r\n                name=\"email\"\r\n                required\r\n                id=\"email-input\"\r\n                value={email}\r\n                onChange={handleInputChange}\r\n              />\r\n              <span\r\n                className={`form__error ${\r\n                  isDisabledDefault\r\n                    ? ''\r\n                    : isEmailInvalid && 'form__error_visible'\r\n                }`}\r\n              >\r\n                {isAnyParamsEmailValid\r\n                  ? errors.email.required\r\n                    ? 'Поле обязательно для заполнения'\r\n                    : 'Введите Email-адрес'\r\n                  : ''}\r\n              </span>\r\n            </label>\r\n            <label className=\"label\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Пароль\"\r\n                className={`form__input form__input_location_sign ${\r\n                  isDisabledDefault\r\n                    ? ''\r\n                    : isPasswordInvalid && 'form__input_type_error'\r\n                }`}\r\n                name=\"password\"\r\n                required\r\n                minLength={minInputLength}\r\n                id=\"password-input\"\r\n                value={password}\r\n                onChange={handleInputChange}\r\n              />\r\n              <span\r\n                className={`form__error ${\r\n                  isDisabledDefault\r\n                    ? ''\r\n                    : isPasswordInvalid && 'form__error_visible'\r\n                }`}\r\n              >\r\n                {isAnyParamsPasswordValid\r\n                  ? errors.password.required\r\n                    ? 'Поле обязательно для заполнения'\r\n                    : `Введите фразу не короче ${minInputLength} символов`\r\n                  : ''}\r\n              </span>\r\n            </label>\r\n          </fieldset>\r\n          <button\r\n            disabled={isDisabled}\r\n            type=\"submit\"\r\n            className={`form__button form__button_location_sign ${\r\n              isDisabled && 'form__button_disabled'\r\n            }`}\r\n          >\r\n            {isSubmittingLogin ? 'Вход...' : 'Войти'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n      <div className=\"login__footer\" />\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { validateField } from '../utils/utils';\r\nimport { Link } from 'react-router-dom';\r\nimport * as auth from '../utils/auth';\r\n\r\nconst minInputLength = 2;\r\n\r\nconst validators = {\r\n  password: {\r\n    required: (value) => value === '',\r\n    minLength: (value) => value.length < minInputLength,\r\n  },\r\n  email: {\r\n    required: (value) => value === '',\r\n    email: (value) =>\r\n      !/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(\r\n        value\r\n      ),\r\n  },\r\n};\r\n\r\nfunction Register({ onShowPopup, onRegistrationResolve }) {\r\n  const [isDisabledDefault, setIsDisabledDefault] = useState(true);\r\n  const [isSubmittingRegister, setIsSubmittingRegister] = useState(false);\r\n\r\n  const [formValues, setFormValues] = useState({\r\n    password: '',\r\n    email: '',\r\n  });\r\n\r\n  const [errors, setErrors] = useState({\r\n    password: {\r\n      required: true,\r\n      minLength: true,\r\n    },\r\n    email: {\r\n      required: true,\r\n      email: true,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsDisabledDefault(true);\r\n    return () => {\r\n      setFormValues({\r\n        password: '',\r\n        email: '',\r\n      });\r\n    };\r\n  }, []);\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    setIsSubmittingRegister(true);\r\n    auth\r\n      .register(formValues.password, formValues.email)\r\n      .then((res) => {\r\n        if (!res.error) {\r\n          onRegistrationResolve(true);\r\n          onShowPopup(true);\r\n        } else {\r\n          onShowPopup(true);\r\n        }\r\n      })\r\n      .catch((res) => {\r\n        console.log(res);\r\n      })\r\n      .finally(() => {\r\n        setIsDisabledDefault(true);\r\n        setIsSubmittingRegister(false);\r\n      });\r\n  };\r\n\r\n  const handleInputChange = useCallback(\r\n    (evt) => {\r\n      setIsDisabledDefault(false);\r\n      const { name, value } = evt.target;\r\n      setFormValues((state) => ({ ...state, [name]: value }));\r\n    },\r\n    [setFormValues]\r\n  );\r\n\r\n  useEffect(\r\n    function validateInputs() {\r\n      const { password, email } = formValues;\r\n      const passwordValidationResult = validateField(\r\n        validators.password,\r\n        password\r\n      );\r\n      const emailValidationResult = validateField(validators.email, email);\r\n      setErrors({\r\n        password: passwordValidationResult,\r\n        email: emailValidationResult,\r\n      });\r\n    },\r\n    [formValues, setErrors]\r\n  );\r\n\r\n  const { password, email } = formValues;\r\n  const isPasswordInvalid = Object.values(errors.password).some(Boolean);\r\n  const isEmailInvalid = Object.values(errors.email).some(Boolean);\r\n  const isSubmitDisabled = isPasswordInvalid || isEmailInvalid;\r\n\r\n  const isAnyParamsPasswordValid =\r\n    errors.password.required || errors.password.minLength;\r\n  const isAnyParamsEmailValid = errors.email.required || errors.email.email;\r\n\r\n  const isDisabled =\r\n    isDisabledDefault || isSubmitDisabled || isSubmittingRegister;\r\n\r\n  return (\r\n    <section className=\"login\">\r\n      <div className=\"login__container\">\r\n        <h2 className=\"login__title\">Регистрация</h2>\r\n        <form onSubmit={handleSubmit} noValidate name=\"login\" className=\"form\">\r\n          <fieldset className=\"form__fields\">\r\n            <label className=\"label\">\r\n              <input\r\n                type=\"email\"\r\n                placeholder=\"Email\"\r\n                className={`form__input form__input_location_sign ${\r\n                  isDisabledDefault\r\n                    ? ''\r\n                    : isEmailInvalid && 'form__input_type_error'\r\n                }`}\r\n                name=\"email\"\r\n                required\r\n                id=\"email-input\"\r\n                value={email}\r\n                onChange={handleInputChange}\r\n              />\r\n              <span\r\n                className={`form__error ${\r\n                  isDisabledDefault\r\n                    ? ''\r\n                    : isEmailInvalid && 'form__error_visible'\r\n                }`}\r\n              >\r\n                {isAnyParamsEmailValid\r\n                  ? errors.email.required\r\n                    ? 'Поле обязательно для заполнения'\r\n                    : 'Введите Email-адрес'\r\n                  : ''}\r\n              </span>\r\n            </label>\r\n            <label className=\"label\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Пароль\"\r\n                className={`form__input form__input_location_sign ${\r\n                  isDisabledDefault\r\n                    ? ''\r\n                    : isPasswordInvalid && 'form__input_type_error'\r\n                }`}\r\n                name=\"password\"\r\n                required\r\n                minLength={minInputLength}\r\n                id=\"password-input\"\r\n                value={password}\r\n                onChange={handleInputChange}\r\n              />\r\n              <span\r\n                className={`form__error ${\r\n                  isDisabledDefault\r\n                    ? ''\r\n                    : isPasswordInvalid && 'form__error_visible'\r\n                }`}\r\n              >\r\n                {isAnyParamsPasswordValid\r\n                  ? errors.password.required\r\n                    ? 'Поле обязательно для заполнения'\r\n                    : `Введите фразу не короче ${minInputLength} символов`\r\n                  : ''}\r\n              </span>\r\n            </label>\r\n          </fieldset>\r\n          <button\r\n            disabled={isDisabled}\r\n            type=\"submit\"\r\n            className={`form__button form__button_location_sign ${\r\n              isDisabled && 'form__button_disabled'\r\n            }`}\r\n          >\r\n            {isSubmittingRegister ? 'Регистрация...' : 'Зарегистрироваться'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n      <div className=\"login__footer\">\r\n        <p className=\"login__sign-text\">\r\n          Уже зарегистрированы?{' '}\r\n          <Link to=\"/sign-in\" className=\"login__auth\">\r\n            Войти\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import { useHistory } from 'react-router-dom';\r\n\r\nfunction BurgerMenu({ email, onSignOut }) {\r\n  let history = useHistory();\r\n\r\n  const handleOutClick = () => {\r\n    onSignOut();\r\n    localStorage.removeItem('token');\r\n    history.push('/sign-in');\r\n  };\r\n\r\n  return (\r\n    <div className=\"burger-menu\">\r\n      <ul className=\"burger-menu__content\">\r\n        <li className=\"burger-menu__item\">\r\n          <p className=\"burger__element\">{email}</p>\r\n        </li>\r\n        <li className=\"burger-menu__item\">\r\n          <button\r\n            onClick={handleOutClick}\r\n            className=\"burger__element burger__element_button\"\r\n          >\r\n            Выйти\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BurgerMenu;\r\n","export default __webpack_public_path__ + \"static/media/successful-registration.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/registration-error.7c6a020b.svg\";","import successfulRegistration from '../images/successful-registration.svg';\r\nimport registrationError from '../images/registration-error.svg';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nfunction InfoTooltip({\r\n  isOpen,\r\n  onClose,\r\n  isSuccessfulRegistration,\r\n  onRegistrationResolve,\r\n}) {\r\n  let history = useHistory();\r\n\r\n  return (\r\n    <section className={`popup ${isOpen && 'popup_opened'}`}>\r\n      <div className=\"popup__container popup__container_section_registration\">\r\n        <button\r\n          onClick={() => {\r\n            onClose();\r\n            isSuccessfulRegistration && history.push('/sign-in');\r\n            onRegistrationResolve(false);\r\n          }}\r\n          type=\"button\"\r\n          className=\"popup__button-close popup__button-close_section_registration\"\r\n        />\r\n        <img\r\n          className=\"popup__registration-image\"\r\n          src={\r\n            isSuccessfulRegistration\r\n              ? successfulRegistration\r\n              : registrationError\r\n          }\r\n          alt=\"Вы успешно зарегистрированы!\"\r\n        />\r\n        <h2 className=\"popup__title popup__title_section_registration\">\r\n          {isSuccessfulRegistration\r\n            ? 'Вы успешно зарегистрировались!'\r\n            : 'Что-то пошло не так! Попробуйте ещё раз.'}\r\n        </h2>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;\r\n","import { useState, useEffect } from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport '../index.css';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ConfirmPopup from './ConfirmPopup';\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport api from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport RenderLoading from './RenderLoading';\nimport ProtectedRoute from './ProtectedRoute';\nimport Login from './Login';\nimport Register from './Register';\nimport * as auth from '../utils/auth';\nimport BurgerMenu from './BurgerMenu';\nimport InfoTooltip from './InfoTooltip';\n\nfunction App() {\n  let history = useHistory();\n\n  const [isSuccessfulRegistration, setIsSuccessfulRegistration] = useState(\n    false\n  );\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isConfirmPopupOpen, setIsConfirmPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [dataLoading, setDataLoading] = useState(true);\n  const [isLoadingProfileInfo, setIsLoadingProfileInfo] = useState(false);\n  const [isLoadingCardAdd, setIsLoadingCardAdd] = useState(false);\n  const [isLoadingProfileAvatar, setIsLoadingProfileAvatar] = useState(false);\n  const [isLoadingConfirm, setIsLoadingConfirm] = useState(false);\n  const [currentDeletionCard, setCurrentDeletionCard] = useState(null);\n  const [isSubmittingProfileInfo, setIsSubmittingProfileInfo] = useState(false);\n  const [isSubmittingCardAdd, setIsSubmittingCardAdd] = useState(false);\n  const [isSubmittingDeleteConfirm, setIsSubmittingDeleteConfirm] = useState(\n    false\n  );\n  const [isSubmittingProfileAvatar, setIsSubmittingProfileAvatar] = useState(\n    false\n  );\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [isMenuClick, setIsMenuClick] = useState(false);\n\n  useEffect(() => {\n    handleTokenCheck();\n    api\n      .getInitialData()\n      .then((data) => {\n        const [cards, userInfo] = data;\n        setDataLoading(false);\n        setCards(cards);\n        setCurrentUser(userInfo);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }, []);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(\n      (likeOnCard) => likeOnCard._id === currentUser._id\n    );\n\n    api\n      .toggleCardLike(card._id, isLiked)\n      .then((newCard) => {\n        setCards((prevCards) =>\n          prevCards.map((prevCard) =>\n            prevCard._id === card._id ? newCard : prevCard\n          )\n        );\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  function handleCardDelete(card) {\n    setCurrentDeletionCard(card);\n    setIsConfirmPopupOpen(true);\n  }\n\n  function handleDeleteConfirm(card) {\n    setIsSubmittingDeleteConfirm(true);\n    setIsLoadingConfirm(true);\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        setCards((oldCards) =>\n          oldCards.filter((oldCard) => oldCard._id !== card._id)\n        );\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n      .finally(() => {\n        setIsLoadingConfirm(false);\n        setIsSubmittingDeleteConfirm(false);\n      });\n  }\n\n  const handleAddPlaceSubmit = (newCard) => {\n    setIsSubmittingCardAdd(true);\n    setIsLoadingCardAdd(true);\n    api\n      .createCard(newCard.name, newCard.link)\n      .then((res) => {\n        setCards([res, ...cards]);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n      .finally(() => {\n        setIsLoadingCardAdd(false);\n        setIsSubmittingCardAdd(false);\n      });\n  };\n\n  const handleUpdateUser = (userObj) => {\n    setIsSubmittingProfileInfo(true);\n    setIsLoadingProfileInfo(true);\n    api\n      .setUserInfo(userObj.name, userObj.about)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n      .finally(() => {\n        setIsLoadingProfileInfo(false);\n        setIsSubmittingProfileInfo(false);\n      });\n  };\n\n  const handleUpdateAvatar = (avatarObj) => {\n    setIsSubmittingProfileAvatar(true);\n    setIsLoadingProfileAvatar(true);\n    api\n      .updateAvatar(avatarObj.avatar)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n      .finally(() => {\n        setIsLoadingProfileAvatar(false);\n        setIsSubmittingProfileAvatar(false);\n      });\n  };\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(selectedCard) {\n    setSelectedCard(selectedCard);\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsConfirmPopupOpen(false);\n    setSelectedCard(null);\n    setIsInfoTooltipPopupOpen(false);\n  }\n\n  const handleTokenCheck = () => {\n    if (localStorage.getItem('token')) {\n      const token = localStorage.getItem('token');\n      auth.checkToken(token).then((res) => {\n        setLoggedIn((prevState) => ({\n          ...prevState,\n          email: res.data.email,\n        }));\n        if (res) {\n          history.push('/main');\n        }\n      });\n    }\n  };\n\n  const handleLogin = () => {\n    handleTokenCheck();\n    setLoggedIn(true);\n  };\n\n  const onSignOut = () => {\n    setLoggedIn(false);\n    setIsMenuClick(false);\n  };\n\n  const onMenuClick = () => {\n    setIsMenuClick(!isMenuClick);\n  };\n\n  return (\n    <div\n      className={`page ${isMenuClick && 'page_shift'} ${\n        !loggedIn && 'page_without-login'\n      }`}\n    >\n      {dataLoading ? (\n        <RenderLoading />\n      ) : (\n        <CurrentUserContext.Provider value={currentUser}>\n          <BurgerMenu\n            isMenuClick={isMenuClick}\n            onSignOut={onSignOut}\n            email={loggedIn.email}\n          />\n          <Header\n            onMenuClick={onMenuClick}\n            onSignOut={onSignOut}\n            email={loggedIn.email}\n          />\n          <Switch>\n            <ProtectedRoute\n              path=\"/main\"\n              loggedIn={loggedIn}\n              component={Main}\n              cards={cards}\n              onCardLike={handleCardLike}\n              onCardDelete={handleCardDelete}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onEditAvatar={handleEditAvatarClick}\n              onCardClick={handleCardClick}\n            />\n            <Route path=\"/sign-in\">\n              <Login handleLogin={handleLogin} />\n            </Route>\n            <Route path=\"/sign-up\">\n              <Register\n                onRegistrationResolve={setIsSuccessfulRegistration}\n                onShowPopup={setIsInfoTooltipPopupOpen}\n              />\n            </Route>\n            <Route path=\"/\">\n              {loggedIn ? <Redirect to=\"/main\" /> : <Redirect to=\"/sign-in\" />}\n            </Route>\n          </Switch>\n          {loggedIn && <Footer />}\n          <EditProfilePopup\n            isLoading={isLoadingProfileInfo}\n            onUpdateUser={handleUpdateUser}\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            isSubmitting={isSubmittingProfileInfo}\n          />\n          <AddPlacePopup\n            isLoading={isLoadingCardAdd}\n            isOpen={isAddPlacePopupOpen}\n            onAddPlace={handleAddPlaceSubmit}\n            onClose={closeAllPopups}\n            isSubmitting={isSubmittingCardAdd}\n          />\n          <ConfirmPopup\n            isOpen={isConfirmPopupOpen}\n            card={currentDeletionCard}\n            onDeleteCard={handleDeleteConfirm}\n            onClose={closeAllPopups}\n            isLoading={isLoadingConfirm}\n            isSubmitting={isSubmittingDeleteConfirm}\n          />\n          <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n          <EditAvatarPopup\n            isLoading={isLoadingProfileAvatar}\n            isOpen={isEditAvatarPopupOpen}\n            onUpdateAvatar={handleUpdateAvatar}\n            onClose={closeAllPopups}\n            isSubmitting={isSubmittingProfileAvatar}\n          />\n          <InfoTooltip\n            onClose={closeAllPopups}\n            isOpen={isInfoTooltipPopupOpen}\n            isSuccessfulRegistration={isSuccessfulRegistration}\n            onRegistrationResolve={setIsSuccessfulRegistration}\n          />\n        </CurrentUserContext.Provider>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}