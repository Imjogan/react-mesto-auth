{"version":3,"sources":["components/Header.js","images/filler.jpg","components/Image.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ConfirmPopup.js","components/ImagePopup.js","utils/utils.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/api.js","components/RenderLoading.js","components/ProtectedRoute.js","utils/auth.js","components/Login.js","components/Register.js","components/BurgerMenu.js","images/successful-registration.svg","images/registration-error.svg","components/InfoTooltip.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","email","onSignOut","onMobileMenuClick","location","useLocation","useState","isClick","setIsClick","useEffect","className","path","to","onClick","Image","src","alt","isLoadError","setIsLoadError","filler","onError","CurrentUserContext","React","createContext","Card","getCard","card","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","likeOnCard","cardLikeButtonClassName","cardDeleteButtonClassName","type","link","name","length","Main","onEditProfile","onAddPlace","onEditAvatar","onCardClick","cards","target","href","avatar","about","map","Footer","currentDate","Date","getFullYear","PopupWithForm","title","submitButtonText","isOpen","onClose","onSubmit","children","isValidity","isSubmitting","isDisabled","isDisabledDefault","noValidate","disabled","ConfirmPopup","onDeleteCard","evt","preventDefault","ImagePopup","validateField","validator","fieldName","Object","keys","errorKey","errorResult","reduce","acc","item","validators","userName","required","value","minLength","maxLength","description","EditProfilePopup","onUpdateUser","setIsDisabledDefault","formValues","setFormValues","errors","setErrors","undefined","handleInputChange","useCallback","state","userNameValidationRusult","descriptionValidationRusult","isUserNameInvalid","values","Boolean","isDescriptionInvalid","isSubmitDisabled","isAnyParamsUserNameValid","isAnyParamsDescriptionValid","id","onChange","EditAvatarPopup","onUpdateAvatar","avatarValue","useRef","current","placeholder","ref","cardName","cardLink","url","test","AddPlacePopup","cardNameValidationResult","cardLinkValidationResult","isСardNameInvalid","isСardLinkInvalid","isAnyParamsCardNameValid","isAnyParamsCardLinkValid","api","options","this","_baseUrl","baseUrl","_headers","headers","fetch","method","then","res","ok","json","Promise","reject","status","all","getCards","getUserInfo","body","JSON","stringify","cardId","hasLike","avatarUrl","authorization","RenderLoading","ProtectedRoute","Component","component","props","loggedIn","BASE_URL","password","Login","handleLogin","history","useHistory","isSubmittingLogin","setIsSubmittingLogin","passwordValidationResult","emailValidationResult","isPasswordInvalid","isEmailInvalid","isAnyParamsPasswordValid","isAnyParamsEmailValid","response","data","localStorage","setItem","token","auth","push","catch","err","console","log","finally","Register","onShowPopup","onRegistrationResolve","isSubmittingRegister","setIsSubmittingRegister","error","BurgerMenu","InfoTooltip","isSuccessfulRegistration","successfulRegistration","registrationError","App","setIsSuccessfulRegistration","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isConfirmPopupOpen","setIsConfirmPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","dataLoading","setDataLoading","currentDeletionCard","setCurrentDeletionCard","isSubmittingProfileInfo","setIsSubmittingProfileInfo","isSubmittingCardAdd","setIsSubmittingCardAdd","isSubmittingDeleteConfirm","setIsSubmittingDeleteConfirm","isSubmittingProfileAvatar","setIsSubmittingProfileAvatar","authState","setAuthState","isMobileMenuOpen","setIsMobileMenuOpen","closeAllPopups","handleTokenCheck","getInitialData","userInfo","getItem","Authorization","removeItem","Provider","exact","user","toggleCardLike","newCard","prevCards","prevCard","prevState","userObj","setUserInfo","createCard","deleteCard","oldCards","filter","oldCard","avatarObj","updateAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2b08f008.chunk.js","sourcesContent":["import { Link, useLocation, Route, Switch } from 'react-router-dom';\r\nimport { useState, useEffect } from 'react';\r\n\r\nfunction Header({ email, onSignOut, onMobileMenuClick }) {\r\n  let location = useLocation();\r\n\r\n  const [isClick, setIsClick] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setIsClick(false);\r\n  }, [location]);\r\n\r\n  const handleMobileMenuClick = () => {\r\n    setIsClick(!isClick);\r\n    onMobileMenuClick();\r\n  };\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <figure className=\"header__logo\" />\r\n      <Switch>\r\n        <Route path=\"/sign-in\">\r\n          <Link to=\"/sign-up\" className=\"header__element\">\r\n            Регистрация\r\n          </Link>\r\n        </Route>\r\n        <Route path=\"/sign-up\">\r\n          <Link to=\"/sign-in\" className=\"header__element\">\r\n            Войти\r\n          </Link>\r\n        </Route>\r\n        <Route path=\"*\">\r\n          <>\r\n            <nav className=\"header__menu\">\r\n              <p className=\"header__menu-element\">{email}</p>\r\n              <button\r\n                onClick={() => {\r\n                  onSignOut();\r\n                }}\r\n                className=\"header__menu-element header__menu-element_button\"\r\n              >\r\n                Выйти\r\n              </button>\r\n            </nav>\r\n            <nav className=\"burger\">\r\n              <figure\r\n                onClick={handleMobileMenuClick}\r\n                className={`burger__button burger__button_type_cross ${\r\n                  isClick && 'burger__button_active'\r\n                }`}\r\n              >\r\n                <span className=\"burger__contain\" />\r\n              </figure>\r\n            </nav>\r\n          </>\r\n        </Route>\r\n      </Switch>\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","export default __webpack_public_path__ + \"static/media/filler.6c929a1e.jpg\";","import { useState, useEffect } from 'react';\r\nimport filler from '../images/filler.jpg';\r\n\r\nfunction Image({ src, alt, onClick, className }) {\r\n  const [isLoadError, setIsLoadError] = useState(false);\r\n\r\n  useEffect(() => setIsLoadError(false), [src]);\r\n\r\n  function handleLoadError() {\r\n    setIsLoadError(true);\r\n  }\r\n\r\n  return (\r\n    <img\r\n      onClick={onClick}\r\n      src={isLoadError ? filler : src}\r\n      alt={`Фото: ${alt ? alt : ''}`}\r\n      className={className}\r\n      onError={handleLoadError}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Image;\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import { useContext } from 'react';\r\nimport Image from './Image';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({ getCard, card, onCardLike, onCardDelete }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  // Определяем, являемся ли мы владельцем текущей карточки\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const isLiked = card.likes.some(\r\n    (likeOnCard) => likeOnCard._id === currentUser._id\r\n  );\r\n\r\n  const cardLikeButtonClassName = `element__like\r\n    ${isLiked && 'element__like_active'}`;\r\n  const cardDeleteButtonClassName = `element__trash-button\r\n    ${isOwn && 'element__trash-button_visible'}`;\r\n\r\n  function handleClickImage() {\r\n    getCard(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  return (\r\n    <li className=\"element\">\r\n      <button\r\n        onClick={handleDeleteClick}\r\n        type=\"button\"\r\n        className={cardDeleteButtonClassName}\r\n      />\r\n      <Image\r\n        src={card.link}\r\n        alt={card.name}\r\n        className=\"element__image\"\r\n        onClick={handleClickImage}\r\n      />\r\n      <div className=\"element__container\">\r\n        <h2 className=\"element__title\"> {card.name} </h2>\r\n        <div className=\"element__like-group\">\r\n          <button\r\n            onClick={handleLikeClick}\r\n            type=\"button\"\r\n            className={cardLikeButtonClassName}\r\n          />\r\n          <h3 className=\"element__like-counter\"> {card.likes.length} </h3>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import { useContext } from 'react';\r\nimport Card from './Card';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main({\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onEditAvatar,\r\n  onCardClick,\r\n  cards,\r\n  onCardLike,\r\n  onCardDelete,\r\n}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"main\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__container\">\r\n          <a\r\n            onClick={onEditAvatar}\r\n            target=\"_self\"\r\n            href=\"#\"\r\n            className=\"profile__cover\"\r\n          >\r\n            <img\r\n              alt={`Аватар пользователя ${currentUser.name}`}\r\n              src={currentUser.avatar}\r\n              className=\"profile__avatar\"\r\n            />\r\n          </a>\r\n          <div className=\"profile__info\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button\r\n              onClick={onEditProfile}\r\n              type=\"button\"\r\n              className=\"profile__button-edit\"\r\n            />\r\n            <p className=\"profile__status\">{currentUser.about}</p>\r\n          </div>\r\n        </div>\r\n        <button onClick={onAddPlace} type=\"button\" className=\"profile__button-add\" />\r\n      </section>\r\n      <section>\r\n        <ul className=\"elements\">\r\n          {cards.map((card) => (\r\n            <Card\r\n              onCardDelete={onCardDelete}\r\n              onCardLike={onCardLike}\r\n              getCard={onCardClick}\r\n              card={card}\r\n              key={card._id}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","function Footer() {\r\n  const currentDate = new Date().getFullYear();\r\n\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">\r\n        &copy; {currentDate}. React-Mesto-Auth, Russia\r\n      </p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","function PopupWithForm({\r\n  name,\r\n  title,\r\n  submitButtonText,\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  children,\r\n  isValidity,\r\n  isSubmitting,\r\n  isDisabledDefault,\r\n}) {\r\n  const isDisabled = isDisabledDefault || isValidity || isSubmitting;\r\n  return (\r\n    <section className={`popup ${isOpen && 'popup_opened'}`}>\r\n      <div className=\"popup__container\">\r\n        <button onClick={onClose} type=\"button\" className=\"popup__button-close\" />\r\n        <h2 className=\"popup__title\">{title}</h2>\r\n        <form onSubmit={onSubmit} noValidate name={`form-${name}`} className=\"form\">\r\n          {children}\r\n          <button\r\n            disabled={isDisabled}\r\n            type=\"submit\"\r\n            className={`form__button ${isDisabled && 'form__button_disabled'}`}\r\n          >\r\n            {submitButtonText}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import PopupWithForm from './PopupWithForm';\r\n\r\nfunction ConfirmPopup({ isOpen, onClose, onDeleteCard, card, isSubmitting }) {\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onDeleteCard(card);\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"delete-confirm\"\r\n      title=\"Вы уверены?\"\r\n      submitButtonText={isSubmitting ? 'Удаление...' : 'Да'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isSubmitting={isSubmitting}\r\n    />\r\n  );\r\n}\r\n\r\nexport default ConfirmPopup;\r\n","import Image from './Image';\r\n\r\nfunction ImagePopup({ card, onClose }) {\r\n  return (\r\n    <section className={`popup ${card && 'popup_opened'}`}>\r\n      <div className=\"popup__zoom-image\">\r\n        <button onClick={onClose} type=\"button\" className=\"popup__button-close\" />\r\n        <Image\r\n          src={card && card.link}\r\n          alt={card && card.name}\r\n          className=\"popup__image\"\r\n        />\r\n        <h2 className=\"popup__title-zoom-image\"> {card && card.name} </h2>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","export const validateField = (validator, fieldName) => {\r\n  return Object.keys(validator)\r\n    .map((errorKey) => {\r\n      const errorResult = validator[errorKey](fieldName);\r\n      return { [errorKey]: errorResult };\r\n    })\r\n    .reduce((acc, item) => ({ ...acc, ...item }), {});\r\n};\r\n","import { useState, useContext, useEffect, useCallback } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { validateField } from '../utils/utils';\r\n\r\nconst minUserNameInputLength = 2;\r\nconst maxUserNameInputLength = 40;\r\nconst minDescriptionInputLength = 2;\r\nconst maxDescriptionInputLength = 200;\r\n\r\nconst validators = {\r\n  userName: {\r\n    required: (value) => value === '',\r\n    minLength: (value) => value.length < minUserNameInputLength,\r\n    maxLength: (value) => value.length > maxUserNameInputLength,\r\n  },\r\n  description: {\r\n    required: (value) => value === '',\r\n    minLength: (value) => value.length < minDescriptionInputLength,\r\n    maxLength: (value) => value.length > maxDescriptionInputLength,\r\n  },\r\n};\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser, isSubmitting }) {\r\n  const [isDisabledDefault, setIsDisabledDefault] = useState(true);\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const [formValues, setFormValues] = useState({\r\n    userName: '',\r\n    description: '',\r\n  });\r\n\r\n  const [errors, setErrors] = useState({\r\n    userName: {\r\n      required: true,\r\n      minLength: true,\r\n      maxLength: true,\r\n    },\r\n    description: {\r\n      required: true,\r\n      minLength: true,\r\n      maxLength: true,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (currentUser.name !== undefined && currentUser.about !== undefined) {\r\n      setFormValues({\r\n        userName: currentUser.name,\r\n        description: currentUser.about,\r\n      });\r\n    }\r\n    setIsDisabledDefault(true);\r\n  }, [isOpen, currentUser]);\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onUpdateUser({\r\n      name: userName,\r\n      about: description,\r\n    });\r\n  };\r\n\r\n  const handleInputChange = useCallback(\r\n    (evt) => {\r\n      setIsDisabledDefault(false);\r\n      const { name, value } = evt.target;\r\n      setFormValues((state) => ({ ...state, [name]: value }));\r\n    },\r\n    [setFormValues]\r\n  );\r\n\r\n  useEffect(\r\n    function validateInputs() {\r\n      const { userName, description } = formValues;\r\n\r\n      const userNameValidationRusult = validateField(validators.userName, userName);\r\n\r\n      const descriptionValidationRusult = validateField(\r\n        validators.description,\r\n        description\r\n      );\r\n\r\n      setErrors({\r\n        userName: userNameValidationRusult,\r\n        description: descriptionValidationRusult,\r\n      });\r\n    },\r\n    [formValues, setErrors]\r\n  );\r\n\r\n  const { userName, description } = formValues;\r\n  const isUserNameInvalid = Object.values(errors.userName).some(Boolean);\r\n  const isDescriptionInvalid = Object.values(errors.description).some(Boolean);\r\n  const isSubmitDisabled = isUserNameInvalid || isDescriptionInvalid;\r\n\r\n  const isAnyParamsUserNameValid =\r\n    errors.userName.required || errors.userName.minLength;\r\n  const isAnyParamsDescriptionValid =\r\n    errors.description.required || errors.description.minLength;\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile-edit\"\r\n      title=\"Редактировать профиль\"\r\n      submitButtonText={isSubmitting ? 'Сохранение...' : 'Сохранить'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isValidity={isSubmitDisabled}\r\n      isSubmitting={isSubmitting}\r\n      isDisabledDefault={isDisabledDefault}\r\n    >\r\n      <fieldset className=\"form__fields\">\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"text\"\r\n            className={`form__input ${\r\n              isUserNameInvalid && 'form__input_type_error'\r\n            }`}\r\n            name=\"userName\"\r\n            required\r\n            minLength={minUserNameInputLength}\r\n            maxLength={maxUserNameInputLength}\r\n            id=\"profile-name-input\"\r\n            value={userName}\r\n            onChange={handleInputChange}\r\n          />\r\n          <span\r\n            className={`form__error ${isUserNameInvalid && 'form__error_visible'}`}\r\n          >\r\n            {isAnyParamsUserNameValid\r\n              ? errors.userName.required\r\n                ? 'Поле обязательно для заполнения'\r\n                : `Введите фразу не короче ${minUserNameInputLength} символов`\r\n              : ''}\r\n            {errors.userName.maxLength &&\r\n              `Превышел лимит в ${maxUserNameInputLength} символов`}\r\n          </span>\r\n        </label>\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"text\"\r\n            className={`form__input ${\r\n              isDescriptionInvalid && 'form__input_type_error'\r\n            }`}\r\n            name=\"description\"\r\n            required\r\n            minLength={minDescriptionInputLength}\r\n            maxLength={maxDescriptionInputLength}\r\n            id=\"profile-status-input\"\r\n            value={description}\r\n            onChange={handleInputChange}\r\n          />\r\n          <span\r\n            className={`form__error ${\r\n              isDescriptionInvalid && 'form__error_visible'\r\n            }`}\r\n          >\r\n            {isAnyParamsDescriptionValid\r\n              ? errors.description.required\r\n                ? 'Поле обязательно для заполнения'\r\n                : `Введите фразу не короче ${minDescriptionInputLength} символов`\r\n              : ''}\r\n            {errors.description.maxLength &&\r\n              `Превышел лимит в ${maxDescriptionInputLength} символов`}\r\n          </span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import { useRef, useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, isSubmitting }) {\r\n  const avatarValue = useRef();\r\n\r\n  useEffect(() => {\r\n    avatarValue.current.value = '';\r\n  }, [isOpen]);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    onUpdateAvatar({\r\n      avatar: avatarValue.current.value,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"update-avatar\"\r\n      title=\"Обновить аватар\"\r\n      submitButtonText={isSubmitting ? 'Сохранение...' : 'Сохранить'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isSubmitting={isSubmitting}\r\n    >\r\n      <fieldset className=\"form__fields\">\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"url\"\r\n            placeholder=\"Ссылка на фотографию\"\r\n            className=\"form__input form__input_field_avatar-link\"\r\n            name=\"avatarLink\"\r\n            required\r\n            id=\"avatar-link-input\"\r\n            ref={avatarValue}\r\n          />\r\n          <span className=\"form__error avatar-link-input-error\" />\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { validateField } from '../utils/utils';\r\n\r\nconst minInputLength = 2;\r\nconst maxInputLength = 30;\r\n\r\nconst validators = {\r\n  cardName: {\r\n    required: (value) => value === '',\r\n    minLength: (value) => value.length < minInputLength,\r\n    maxLength: (value) => value.length > maxInputLength,\r\n  },\r\n  cardLink: {\r\n    required: (value) => value === '',\r\n    url: (value) => !/^(ftp|http|https):\\/\\/[^ \"]+$/.test(value),\r\n  },\r\n};\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, isSubmitting }) {\r\n  const [isDisabledDefault, setIsDisabledDefault] = useState(true);\r\n\r\n  const [formValues, setFormValues] = useState({\r\n    cardName: '',\r\n    cardLink: '',\r\n  });\r\n\r\n  const [errors, setErrors] = useState({\r\n    cardName: {\r\n      required: true,\r\n      minLength: true,\r\n      maxLength: true,\r\n    },\r\n    cardLink: {\r\n      required: true,\r\n      url: true,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    setFormValues({\r\n      cardName: '',\r\n      cardLink: '',\r\n    });\r\n    setIsDisabledDefault(true);\r\n  }, [isOpen]);\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onAddPlace({\r\n      name: cardName,\r\n      link: cardLink,\r\n    });\r\n  };\r\n\r\n  const handleInputChange = useCallback(\r\n    (evt) => {\r\n      setIsDisabledDefault(false);\r\n      const { name, value } = evt.target;\r\n      setFormValues((state) => ({ ...state, [name]: value }));\r\n    },\r\n    [setFormValues]\r\n  );\r\n\r\n  useEffect(\r\n    function validateInputs() {\r\n      const { cardName, cardLink } = formValues;\r\n      const cardNameValidationResult = validateField(validators.cardName, cardName);\r\n      const cardLinkValidationResult = validateField(validators.cardLink, cardLink);\r\n      setErrors({\r\n        cardName: cardNameValidationResult,\r\n        cardLink: cardLinkValidationResult,\r\n      });\r\n    },\r\n    [formValues, setErrors]\r\n  );\r\n\r\n  const { cardName, cardLink } = formValues;\r\n  const isСardNameInvalid = Object.values(errors.cardName).some(Boolean);\r\n  const isСardLinkInvalid = Object.values(errors.cardLink).some(Boolean);\r\n  const isSubmitDisabled = isСardNameInvalid || isСardLinkInvalid;\r\n\r\n  const isAnyParamsCardNameValid =\r\n    errors.cardName.required || errors.cardName.minLength;\r\n  const isAnyParamsCardLinkValid = errors.cardLink.required || errors.cardLink.url;\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"card-add\"\r\n      title=\"Новое место\"\r\n      submitButtonText={isSubmitting ? 'Добавление...' : 'Добавить'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isValidity={isSubmitDisabled}\r\n      isSubmitting={isSubmitting}\r\n      isDisabledDefault={isDisabledDefault}\r\n    >\r\n      <fieldset className=\"form__fields\">\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Название\"\r\n            className={`form__input ${\r\n              isDisabledDefault ? '' : isСardNameInvalid && 'form__input_type_error'\r\n            }`}\r\n            name=\"cardName\"\r\n            required\r\n            minLength={minInputLength}\r\n            maxLength={maxInputLength}\r\n            id=\"card-name-input\"\r\n            value={cardName}\r\n            onChange={handleInputChange}\r\n          />\r\n          <span\r\n            className={`form__error ${\r\n              isDisabledDefault ? '' : isСardNameInvalid && 'form__error_visible'\r\n            }`}\r\n          >\r\n            {isAnyParamsCardNameValid\r\n              ? errors.cardName.required\r\n                ? 'Поле обязательно для заполнения'\r\n                : `Введите фразу не короче ${minInputLength} символов`\r\n              : ''}\r\n            {errors.cardName.maxLength &&\r\n              `Превышел лимит в ${maxInputLength} символов`}\r\n          </span>\r\n        </label>\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"url\"\r\n            placeholder=\"Ссылка на картинку\"\r\n            className={`form__input ${\r\n              isDisabledDefault ? '' : isСardLinkInvalid && 'form__input_type_error'\r\n            }`}\r\n            name=\"cardLink\"\r\n            required\r\n            id=\"card-link-input\"\r\n            value={cardLink}\r\n            onChange={handleInputChange}\r\n          />\r\n          <span\r\n            className={`form__error ${\r\n              isDisabledDefault ? '' : isСardLinkInvalid && 'form__error_visible'\r\n            }`}\r\n          >\r\n            {isAnyParamsCardLinkValid\r\n              ? errors.cardLink.required\r\n                ? 'Поле обязательно для заполнения'\r\n                : 'Введите URL'\r\n              : ''}\r\n          </span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","class Api {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  // получаем информацию о карточках\r\n  getCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'GET',\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // получаем информацию о пользователе\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  getInitialData() {\r\n    return Promise.all([this.getCards(), this.getUserInfo()]);\r\n  }\r\n\r\n  // отправляем информацию о пользователе\r\n  setUserInfo(name, status) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: status,\r\n      }),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // создаем карточку\r\n  createCard(name, link) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link,\r\n      }),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // удаляем карточку\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // ставим/убираем лайк\r\n  toggleCardLike(cardId, hasLike) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: hasLike ? 'DELETE' : 'PUT',\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // обновляем аватар\r\n  updateAvatar(avatarUrl) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: avatarUrl,\r\n      }),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n}\r\n\r\n// создаем класс для связи с сервером\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-21',\r\n  headers: {\r\n    // уникальный токен пользователя\r\n    authorization: 'a3ab0050-d01a-4f5a-9bb4-4a039b0aa641',\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\nexport default api;\r\n","function RenderLoading() {\r\n  return (\r\n    <div className=\"loader-ring\">\r\n      <div className=\"loader-ring__main\">\r\n        <div className=\"loader-ring__child\" />\r\n        <div className=\"loader-ring__child\" />\r\n        <div className=\"loader-ring__child\" />\r\n        <div className=\"loader-ring__child\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RenderLoading;\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {() =>\r\n        props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","export const BASE_URL = 'https://auth.nomoreparties.co';\r\n\r\nexport const register = (password, email) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ password, email }),\r\n  }).then((response) => {\r\n    return response.json();\r\n  });\r\n};\r\n\r\nexport const authorize = (password, email) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ password, email }),\r\n  })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      if (data) {\r\n        localStorage.setItem('token', data.token);\r\n        return data;\r\n      }\r\n    });\r\n};\r\n\r\nexport const checkToken = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  })\r\n    .then((res) => res.json())\r\n    .then((data) => data);\r\n};\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { validateField } from '../utils/utils';\r\nimport * as auth from '../utils/auth';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst minInputLength = 2;\r\n\r\nconst validators = {\r\n  password: {\r\n    required: (value) => value === '',\r\n    minLength: (value) => value.length < minInputLength,\r\n  },\r\n  email: {\r\n    required: (value) => value === '',\r\n    email: (value) =>\r\n      !/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(\r\n        value\r\n      ),\r\n  },\r\n};\r\n\r\nfunction Login({ handleLogin }) {\r\n  let history = useHistory();\r\n\r\n  const [isDisabledDefault, setIsDisabledDefault] = useState(true);\r\n  const [isSubmittingLogin, setIsSubmittingLogin] = useState(false);\r\n\r\n  const [formValues, setFormValues] = useState({\r\n    password: '',\r\n    email: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsDisabledDefault(true);\r\n    return () => {\r\n      setFormValues({\r\n        password: '',\r\n        email: '',\r\n      });\r\n    };\r\n  }, []);\r\n\r\n  const [errors, setErrors] = useState({\r\n    password: {\r\n      required: true,\r\n      minLength: true,\r\n    },\r\n    email: {\r\n      required: true,\r\n      email: true,\r\n    },\r\n  });\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    setIsSubmittingLogin(true);\r\n    auth\r\n      .authorize(formValues.password, formValues.email)\r\n      .then((data) => {\r\n        if (data.token) {\r\n          localStorage.setItem('token', data.token);\r\n          handleLogin();\r\n          history.push('/');\r\n        }\r\n      })\r\n      .catch((err) => console.log(err))\r\n      .finally(() => {\r\n        setIsDisabledDefault(true);\r\n        setIsSubmittingLogin(false);\r\n      });\r\n  };\r\n\r\n  const handleInputChange = useCallback(\r\n    (evt) => {\r\n      setIsDisabledDefault(false);\r\n      const { name, value } = evt.target;\r\n      setFormValues((state) => ({ ...state, [name]: value }));\r\n    },\r\n    [setFormValues]\r\n  );\r\n\r\n  useEffect(\r\n    function validateInputs() {\r\n      const { password, email } = formValues;\r\n      const passwordValidationResult = validateField(validators.password, password);\r\n      const emailValidationResult = validateField(validators.email, email);\r\n      setErrors({\r\n        password: passwordValidationResult,\r\n        email: emailValidationResult,\r\n      });\r\n    },\r\n    [formValues, setErrors]\r\n  );\r\n\r\n  const { password, email } = formValues;\r\n  const isPasswordInvalid = Object.values(errors.password).some(Boolean);\r\n  const isEmailInvalid = Object.values(errors.email).some(Boolean);\r\n  const isSubmitDisabled = isPasswordInvalid || isEmailInvalid;\r\n\r\n  const isAnyParamsPasswordValid =\r\n    errors.password.required || errors.password.minLength;\r\n  const isAnyParamsEmailValid = errors.email.required || errors.email.email;\r\n\r\n  const isDisabled = isDisabledDefault || isSubmitDisabled || isSubmittingLogin;\r\n\r\n  return (\r\n    <section className=\"login\">\r\n      <div className=\"login__container\">\r\n        <h2 className=\"login__title\">Вход</h2>\r\n        <form onSubmit={handleSubmit} noValidate name=\"login\" className=\"form\">\r\n          <fieldset className=\"form__fields\">\r\n            <label className=\"label\">\r\n              <input\r\n                type=\"email\"\r\n                placeholder=\"Email\"\r\n                className={`form__input form__input_location_sign ${\r\n                  isDisabledDefault ? '' : isEmailInvalid && 'form__input_type_error'\r\n                }`}\r\n                name=\"email\"\r\n                required\r\n                id=\"email-input\"\r\n                value={email}\r\n                onChange={handleInputChange}\r\n              />\r\n              <span\r\n                className={`form__error ${\r\n                  isDisabledDefault ? '' : isEmailInvalid && 'form__error_visible'\r\n                }`}\r\n              >\r\n                {isAnyParamsEmailValid\r\n                  ? errors.email.required\r\n                    ? 'Поле обязательно для заполнения'\r\n                    : 'Введите Email-адрес'\r\n                  : ''}\r\n              </span>\r\n            </label>\r\n            <label className=\"label\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Пароль\"\r\n                className={`form__input form__input_location_sign ${\r\n                  isDisabledDefault\r\n                    ? ''\r\n                    : isPasswordInvalid && 'form__input_type_error'\r\n                }`}\r\n                name=\"password\"\r\n                required\r\n                minLength={minInputLength}\r\n                id=\"password-input\"\r\n                value={password}\r\n                onChange={handleInputChange}\r\n              />\r\n              <span\r\n                className={`form__error ${\r\n                  isDisabledDefault ? '' : isPasswordInvalid && 'form__error_visible'\r\n                }`}\r\n              >\r\n                {isAnyParamsPasswordValid\r\n                  ? errors.password.required\r\n                    ? 'Поле обязательно для заполнения'\r\n                    : `Введите фразу не короче ${minInputLength} символов`\r\n                  : ''}\r\n              </span>\r\n            </label>\r\n          </fieldset>\r\n          <button\r\n            disabled={isDisabled}\r\n            type=\"submit\"\r\n            className={`form__button form__button_location_sign ${\r\n              isDisabled && 'form__button_disabled'\r\n            }`}\r\n          >\r\n            {isSubmittingLogin ? 'Вход...' : 'Войти'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n      <div className=\"login__footer\" />\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport { validateField } from '../utils/utils';\r\nimport { Link } from 'react-router-dom';\r\nimport * as auth from '../utils/auth';\r\n\r\nconst minInputLength = 2;\r\n\r\nconst validators = {\r\n  password: {\r\n    required: (value) => value === '',\r\n    minLength: (value) => value.length < minInputLength,\r\n  },\r\n  email: {\r\n    required: (value) => value === '',\r\n    email: (value) =>\r\n      !/^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(\r\n        value\r\n      ),\r\n  },\r\n};\r\n\r\nfunction Register({ onShowPopup, onRegistrationResolve }) {\r\n  const [isDisabledDefault, setIsDisabledDefault] = useState(true);\r\n  const [isSubmittingRegister, setIsSubmittingRegister] = useState(false);\r\n\r\n  const [formValues, setFormValues] = useState({\r\n    password: '',\r\n    email: '',\r\n  });\r\n\r\n  const [errors, setErrors] = useState({\r\n    password: {\r\n      required: true,\r\n      minLength: true,\r\n    },\r\n    email: {\r\n      required: true,\r\n      email: true,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    setIsDisabledDefault(true);\r\n    return () => {\r\n      setFormValues({\r\n        password: '',\r\n        email: '',\r\n      });\r\n    };\r\n  }, []);\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    setIsSubmittingRegister(true);\r\n    auth\r\n      .register(formValues.password, formValues.email)\r\n      .then((res) => {\r\n        if (!res.error) {\r\n          onRegistrationResolve(true);\r\n          onShowPopup(true);\r\n        } else {\r\n          onShowPopup(true);\r\n        }\r\n      })\r\n      .catch((res) => {\r\n        console.log(res);\r\n      })\r\n      .finally(() => {\r\n        setIsDisabledDefault(true);\r\n        setIsSubmittingRegister(false);\r\n      });\r\n  };\r\n\r\n  const handleInputChange = useCallback(\r\n    (evt) => {\r\n      setIsDisabledDefault(false);\r\n      const { name, value } = evt.target;\r\n      setFormValues((state) => ({ ...state, [name]: value }));\r\n    },\r\n    [setFormValues]\r\n  );\r\n\r\n  useEffect(\r\n    function validateInputs() {\r\n      const { password, email } = formValues;\r\n      const passwordValidationResult = validateField(validators.password, password);\r\n      const emailValidationResult = validateField(validators.email, email);\r\n      setErrors({\r\n        password: passwordValidationResult,\r\n        email: emailValidationResult,\r\n      });\r\n    },\r\n    [formValues, setErrors]\r\n  );\r\n\r\n  const { password, email } = formValues;\r\n  const isPasswordInvalid = Object.values(errors.password).some(Boolean);\r\n  const isEmailInvalid = Object.values(errors.email).some(Boolean);\r\n  const isSubmitDisabled = isPasswordInvalid || isEmailInvalid;\r\n\r\n  const isAnyParamsPasswordValid =\r\n    errors.password.required || errors.password.minLength;\r\n  const isAnyParamsEmailValid = errors.email.required || errors.email.email;\r\n\r\n  const isDisabled = isDisabledDefault || isSubmitDisabled || isSubmittingRegister;\r\n\r\n  return (\r\n    <section className=\"login\">\r\n      <div className=\"login__container\">\r\n        <h2 className=\"login__title\">Регистрация</h2>\r\n        <form onSubmit={handleSubmit} noValidate name=\"login\" className=\"form\">\r\n          <fieldset className=\"form__fields\">\r\n            <label className=\"label\">\r\n              <input\r\n                type=\"email\"\r\n                placeholder=\"Email\"\r\n                className={`form__input form__input_location_sign ${\r\n                  isDisabledDefault ? '' : isEmailInvalid && 'form__input_type_error'\r\n                }`}\r\n                name=\"email\"\r\n                required\r\n                id=\"email-input\"\r\n                value={email}\r\n                onChange={handleInputChange}\r\n              />\r\n              <span\r\n                className={`form__error ${\r\n                  isDisabledDefault ? '' : isEmailInvalid && 'form__error_visible'\r\n                }`}\r\n              >\r\n                {isAnyParamsEmailValid\r\n                  ? errors.email.required\r\n                    ? 'Поле обязательно для заполнения'\r\n                    : 'Введите Email-адрес'\r\n                  : ''}\r\n              </span>\r\n            </label>\r\n            <label className=\"label\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Пароль\"\r\n                className={`form__input form__input_location_sign ${\r\n                  isDisabledDefault\r\n                    ? ''\r\n                    : isPasswordInvalid && 'form__input_type_error'\r\n                }`}\r\n                name=\"password\"\r\n                required\r\n                minLength={minInputLength}\r\n                id=\"password-input\"\r\n                value={password}\r\n                onChange={handleInputChange}\r\n              />\r\n              <span\r\n                className={`form__error ${\r\n                  isDisabledDefault ? '' : isPasswordInvalid && 'form__error_visible'\r\n                }`}\r\n              >\r\n                {isAnyParamsPasswordValid\r\n                  ? errors.password.required\r\n                    ? 'Поле обязательно для заполнения'\r\n                    : `Введите фразу не короче ${minInputLength} символов`\r\n                  : ''}\r\n              </span>\r\n            </label>\r\n          </fieldset>\r\n          <button\r\n            disabled={isDisabled}\r\n            type=\"submit\"\r\n            className={`form__button form__button_location_sign ${\r\n              isDisabled && 'form__button_disabled'\r\n            }`}\r\n          >\r\n            {isSubmittingRegister ? 'Регистрация...' : 'Зарегистрироваться'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n      <div className=\"login__footer\">\r\n        <p className=\"login__sign-text\">\r\n          Уже зарегистрированы?{' '}\r\n          <Link to=\"/sign-in\" className=\"login__auth\">\r\n            Войти\r\n          </Link>\r\n        </p>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","function BurgerMenu({ email, onSignOut }) {\r\n  return (\r\n    <div className=\"burger-menu\">\r\n      <ul className=\"burger-menu__content\">\r\n        <li className=\"burger-menu__item\">\r\n          <p className=\"burger__element\">{email}</p>\r\n        </li>\r\n        <li className=\"burger-menu__item\">\r\n          <button\r\n            onClick={() => {\r\n              onSignOut();\r\n            }}\r\n            className=\"burger__element burger__element_button\"\r\n          >\r\n            Выйти\r\n          </button>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BurgerMenu;\r\n","export default __webpack_public_path__ + \"static/media/successful-registration.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/registration-error.7c6a020b.svg\";","import successfulRegistration from '../images/successful-registration.svg';\r\nimport registrationError from '../images/registration-error.svg';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nfunction InfoTooltip({\r\n  isOpen,\r\n  onClose,\r\n  isSuccessfulRegistration,\r\n  onRegistrationResolve,\r\n}) {\r\n  let history = useHistory();\r\n\r\n  return (\r\n    <section className={`popup ${isOpen && 'popup_opened'}`}>\r\n      <div className=\"popup__container popup__container_section_registration\">\r\n        <button\r\n          onClick={() => {\r\n            onClose();\r\n            isSuccessfulRegistration && history.push('/sign-in');\r\n            onRegistrationResolve(false);\r\n          }}\r\n          type=\"button\"\r\n          className=\"popup__button-close popup__button-close_section_registration\"\r\n        />\r\n        <img\r\n          className=\"popup__registration-image\"\r\n          src={isSuccessfulRegistration ? successfulRegistration : registrationError}\r\n          alt=\"Вы успешно зарегистрированы!\"\r\n        />\r\n        <h2 className=\"popup__title popup__title_section_registration\">\r\n          {isSuccessfulRegistration\r\n            ? 'Вы успешно зарегистрировались!'\r\n            : 'Что-то пошло не так! Попробуйте ещё раз.'}\r\n        </h2>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default InfoTooltip;\r\n","import { useState, useEffect } from 'react';\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport '../index.css';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ConfirmPopup from './ConfirmPopup';\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport api from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport RenderLoading from './RenderLoading';\nimport ProtectedRoute from './ProtectedRoute';\nimport Login from './Login';\nimport Register from './Register';\nimport * as auth from '../utils/auth';\nimport BurgerMenu from './BurgerMenu';\nimport InfoTooltip from './InfoTooltip';\n\nfunction App() {\n  let history = useHistory();\n\n  const [isSuccessfulRegistration, setIsSuccessfulRegistration] = useState(false);\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isConfirmPopupOpen, setIsConfirmPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [currentUser, setCurrentUser] = useState({});\n  const [cards, setCards] = useState([]);\n  const [dataLoading, setDataLoading] = useState(true);\n  const [currentDeletionCard, setCurrentDeletionCard] = useState(null);\n  const [isSubmittingProfileInfo, setIsSubmittingProfileInfo] = useState(false);\n  const [isSubmittingCardAdd, setIsSubmittingCardAdd] = useState(false);\n  const [isSubmittingDeleteConfirm, setIsSubmittingDeleteConfirm] = useState(false);\n  const [isSubmittingProfileAvatar, setIsSubmittingProfileAvatar] = useState(false);\n  const [authState, setAuthState] = useState({\n    loggedIn: false,\n    email: null,\n  });\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n\n  useEffect(() => {\n    handleTokenCheck();\n    api\n      .getInitialData()\n      .then((data) => {\n        const [cards, userInfo] = data;\n        setCards(cards);\n        setCurrentUser(userInfo);\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n      .finally(() => {\n        setDataLoading(false);\n      });\n  }, []);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((user) => user._id === currentUser._id);\n\n    api\n      .toggleCardLike(card._id, isLiked)\n      .then((newCard) => {\n        setCards((prevCards) =>\n          prevCards.map((prevCard) =>\n            prevCard._id === card._id ? newCard : prevCard\n          )\n        );\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  function handleCardDelete(card) {\n    setCurrentDeletionCard(card);\n    setIsConfirmPopupOpen(true);\n  }\n\n  function handleDeleteConfirm(card) {\n    setIsSubmittingDeleteConfirm(true);\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        setCards((oldCards) =>\n          oldCards.filter((oldCard) => oldCard._id !== card._id)\n        );\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n      .finally(() => {\n        setIsSubmittingDeleteConfirm(false);\n      });\n  }\n\n  const handleAddPlaceSubmit = (newCard) => {\n    setIsSubmittingCardAdd(true);\n    api\n      .createCard(newCard.name, newCard.link)\n      .then((res) => {\n        setCards([res, ...cards]);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n      .finally(() => {\n        setIsSubmittingCardAdd(false);\n      });\n  };\n\n  const handleUpdateUser = (userObj) => {\n    setIsSubmittingProfileInfo(true);\n    api\n      .setUserInfo(userObj.name, userObj.about)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n      .finally(() => {\n        setIsSubmittingProfileInfo(false);\n      });\n  };\n\n  const handleUpdateAvatar = (avatarObj) => {\n    setIsSubmittingProfileAvatar(true);\n    api\n      .updateAvatar(avatarObj.avatar)\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      })\n      .finally(() => {\n        setIsSubmittingProfileAvatar(false);\n      });\n  };\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(selectedCard) {\n    setSelectedCard(selectedCard);\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsConfirmPopupOpen(false);\n    setSelectedCard(null);\n    setIsInfoTooltipPopupOpen(false);\n  }\n\n  const handleTokenCheck = () => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      auth\n        .checkToken(token)\n        .then((res) => {\n          if (res) {\n            setAuthState({\n              loggedIn: true,\n              email: res.data.email,\n            });\n            history.push('/');\n          }\n        })\n        .catch((res) => console.log(res));\n    }\n  };\n\n  const handleLogin = () => {\n    handleTokenCheck();\n    setAuthState((prevState) => ({\n      ...prevState,\n      loggedIn: true,\n    }));\n  };\n\n  const onSignOut = () => {\n    setAuthState({\n      loggedIn: false,\n      email: null,\n    });\n    localStorage.removeItem('token');\n    history.push('/sign-in');\n    setIsMobileMenuOpen(false);\n  };\n\n  const onMobileMenuClick = () => {\n    setIsMobileMenuOpen(!isMobileMenuOpen);\n  };\n\n  return (\n    <div\n      className={`page ${isMobileMenuOpen && 'page_mobile-menu_opened'} ${\n        !authState.loggedIn && 'page_mobile-menu_disabled'\n      }`}\n    >\n      {dataLoading ? (\n        <RenderLoading />\n      ) : (\n        <CurrentUserContext.Provider value={currentUser}>\n          <BurgerMenu onSignOut={onSignOut} email={authState.email} />\n          <Header\n            onMobileMenuClick={onMobileMenuClick}\n            onSignOut={onSignOut}\n            email={authState.email}\n          />\n          <Switch>\n            <ProtectedRoute\n              exact path=\"/\"\n              loggedIn={authState.loggedIn}\n              component={Main}\n              cards={cards}\n              onCardLike={handleCardLike}\n              onCardDelete={handleCardDelete}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onEditAvatar={handleEditAvatarClick}\n              onCardClick={handleCardClick}\n            />\n            <Route path=\"/sign-in\">\n              <Login handleLogin={handleLogin} />\n            </Route>\n            <Route path=\"/sign-up\">\n              <Register\n                onRegistrationResolve={setIsSuccessfulRegistration}\n                onShowPopup={setIsInfoTooltipPopupOpen}\n              />\n            </Route>\n            <Route path=\"/\">\n              {authState.loggedIn ? (\n                <Redirect to=\"/\" />\n              ) : (\n                <Redirect to=\"/sign-in\" />\n              )}\n            </Route>\n          </Switch>\n          {authState.loggedIn && <Footer />}\n          <EditProfilePopup\n            onUpdateUser={handleUpdateUser}\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            isSubmitting={isSubmittingProfileInfo}\n          />\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onAddPlace={handleAddPlaceSubmit}\n            onClose={closeAllPopups}\n            isSubmitting={isSubmittingCardAdd}\n          />\n          <ConfirmPopup\n            isOpen={isConfirmPopupOpen}\n            card={currentDeletionCard}\n            onDeleteCard={handleDeleteConfirm}\n            onClose={closeAllPopups}\n            isSubmitting={isSubmittingDeleteConfirm}\n          />\n          <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onUpdateAvatar={handleUpdateAvatar}\n            onClose={closeAllPopups}\n            isSubmitting={isSubmittingProfileAvatar}\n          />\n          <InfoTooltip\n            onClose={closeAllPopups}\n            isOpen={isInfoTooltipPopupOpen}\n            isSuccessfulRegistration={isSuccessfulRegistration}\n            onRegistrationResolve={setIsSuccessfulRegistration}\n          />\n        </CurrentUserContext.Provider>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}